# 在庫

特定の商品が特定の倉庫に存在する数量を管理するエンティティ。在庫の現在量と状態を表す。

## 属性

### 在庫ID

在庫を一意に識別するための識別子。

- システム内で自動生成される一意の識別子であること
- 変更不可であること

### 商品ID

在庫に関連する商品の識別子。

- 商品エンティティに存在するIDであること
- 入力必須であること

### 倉庫ID

在庫が保管されている倉庫の識別子。

- 倉庫エンティティに存在するIDであること
- 入力必須であること

### 数量

在庫の現在数量。

- 0以上の数値であること
- 入力必須であること
- 小数点以下の単位を許容する商品と許容しない商品がある

### ロケーション

倉庫内での具体的な保管場所。

- 255文字以内の文字列であること
- 入力は任意であること

### ロット番号

製造ロットや入荷ロットを識別する番号。

- 50文字以内の文字列であること
- 入力は任意であること

### 製造日

商品の製造日。

- 有効な日付形式であること
- 入力は任意であること

### 有効期限

商品の使用期限や消費期限。

- 有効な日付形式であること
- 入力は任意であること
- 設定されている場合は製造日以降の日付であること

### 状態

在庫の状態を示すコード。

- 「通常」「不良」「検査中」「予約済」などの定められた値の中から選択すること
- 入力必須であること（デフォルトは「通常」）

### 作成日時

在庫レコードが作成された日時。

- システムによって自動設定されること
- 変更不可であること

### 更新日時

在庫情報が最後に更新された日時。

- システムによって自動更新されること

## ビジネスルール

- 同一の商品と倉庫の組み合わせに対して、複数の在庫レコードが存在可能（ロット管理などの場合）
- 在庫数量が0になっても、在庫レコードは維持される
- 商品と倉庫の組み合わせに対する在庫総数は、関連する全ての在庫レコードの数量の合計
- 有効期限が設定されている場合、有効期限が近づくと警告が発生する
- 在庫の増減は在庫取引エンティティを通じて行われ、直接の数量変更は制限される
